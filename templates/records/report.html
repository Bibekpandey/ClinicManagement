{% load staticfiles %}

<!DOCTYPE html>

<html>

<head>
    <title> REPORT DISPLAY </title>
</head>

<body>
    <h2> {{ name }} </h2>
    <h2> {{ contact }} </h2>

    <form name = "report" method="post" action="{% url 'report_detail' %}">
    {% csrf_token %}
        <input id="hidden_name_id" type="hidden" name="name" value="-1" />
        <input id="hidden_contact_id" type="hidden" name="contact" value="-1" />
        <input id="hidden_date_id" type="hidden" name="date" value = "-1" />
        <input id="hidden_visit_id" type="hidden" name="id" value="-1" />
    {% for visit in visits %}
    <a href="#" onclick="submitform('{{name}}', '{{ contact }}', '{{ visit.id }}');">{{ visit.date }}</a><br>
    {% endfor %}


</body>

<script>
function submitform(name, contact, visitid)
{
    var hiddenname = document.getElementById("hidden_name_id");
    var hiddencontact = document.getElementById("hidden_contact_id");
    var hiddenvisitid = document.getElementById("hidden_visit_id");

    hiddenname.value = name;
    hiddencontact.value = contact;
    hiddenvisitid.value = visitid;
    
    var forms = document.getElementsByTagName('form');
    var form = forms[0];
    form.submit();
    // not adding alert() returns back here. Don't know what is going on here
}
</script>

</html>
